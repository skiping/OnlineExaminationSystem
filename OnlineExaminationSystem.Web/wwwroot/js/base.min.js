(function(){Date.prototype.format=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(t in i)i.hasOwnProperty(t)&&new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length===1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return n};String.prototype.getDate=function(){var n=/\d{13}/.exec(this),t=new Date(parseInt(n));return t.format("yyyy-MM-dd HH:mm:ss")}})();var XPage={DelData:function(n){var t=JucheapGrid.GetDataTableDeleteData();t.Len>0&&t.Data.length>0?parent.layer.confirm("确认要删除这"+t.Len+"条数据？",{icon:3,title:"提示"},function(i){parent.layer.load(2,{shade:.3});var r=$("#btnDel");r.button("loading");$.ajax({url:n,type:"POST",dataType:"json",data:JSON.stringify(t.Data),contentType:"application/json, charset=utf-8",success:function(n){r.button("reset");parent.layer.close(i);parent.layer.closeAll();n.flag?(parent.layer.msg("删除成功"),$("#table_list").trigger("reloadGrid")):parent.layer.msg("删除失败："+n.msg)}})}):parent.layer.msg("请选择要删除的数据！")},GoTo:function(n,t){$(n).button("loading");window.location.href=t},Search:function(n){var t=$("#table_list").jqGrid("getGridParam","postData");$.extend(t,n);$("#table_list").setGridParam({search:!0}).trigger("reloadGrid",[{page:1}])},DoPost:function(n,t,i,r,u){var f=n!=null,e;f&&$(n).button("loading");e=$.ajax({url:t,type:"POST",data:i,dataType:"JSON",success:function(t){f&&$(n).button("reset");t.flag?r==null||typeof r=="undefined"?parent.layer.msg("操作成功"):r.call(this,t):u==null||typeof u=="undefined"?parent.layer.msg("操作失败："+t.msg):u.call(this,t)},complete:function(t,i){f&&$(n).button("reset");i==="timeout"&&(e.abort(),parent.layer.msg("请求超时，请刷新页面重试"));i==="error"&&(e.abort(),parent.layer.msg("请求失败，请刷新页面重试"))}})}};